<%= javascript_include_tag :dishes %>
<div class="container container_item_page">
	<div class="row item_info_box">
		<div class="col-lg-12 section_item">
			<div class="row row_item">
				<div class="item_same_line">
          <%= rendering_image_data(@dish, "item_info_bar") %>
				</div>
				<div class="item_same_line item_main_info">
					<div class="item_description_div">
						<p class="item_title"><%= @dish.name %></p>
						<p class="item_restaurant"><%= @dish.restaurant_name %></p>
						<p class="item_description_content"><%= @dish.description %></p>
						<div class="">
							<% (@dish.tags || []).each do |tag| %>
							<span class="badge"><b><%= tag.name %></b></span>
							<% end %>
						</div>
						<%= rating_stars(@dish) %>
					</div>
					<div class="item_properties_div">
						<div class="item_description_div_points">
							<p class="item_description_div_point">
								<span class="ratings_average"><%= @dish.avg_ratings || 0.0 %></span></p>
							<p class="item_description_div_rating">
								<span class="no_of_people_rated"><%= @dish.no_of_ratings || 0 %></span> rating</p>
						</div>
						<div class="item_description_div_cost">
							<p class="item_description_div_cost_value">Rs 100</p>
						</div>
						<div class="item_description_div_cost">
							<p class="item_description_div_cost_value">Rs 100</p>
						</div>
					</div>
				</div>
			</div>  
			<div class="row row_item green_border">
				<div class="restaurant_address">
					<p class="address_text"><%= @dish.location_address || "Velachery" %></p>
					<a href="#" class="right_anchor map_opener"> Show on map </a> 
				</div>
				<div class="row row_item map">
					<%#= @dish.location_address || "Velachery" %>
					<div id="map-canvas"></div>
				</div>
			</div>
		</div>
        
	</div>

	<div class="row item_info_box reviews_container">
		<div class="col-lg-12 reviews_top_bar">
			<p class="address_text"><%= @dish.location_address || "Velachery" %></p>
			<a href="#" class="right_anchor write_review"> Write review </a> 
			<p href="#" class="right_anchor_p"> <%= @dish.reviews.size - 1 %> reviews </p> 
		</div>
		<div class="review_pagination_controller">
			<% if @dish.reviews.size > 1 %>
			<%= render :partial => 'review', :collection => @dish.reviews, :as => :review %>
			<% end %>
		</div>

		<div class="col-lg-12 reviews_comment">
			<p class="comment_heading">
				WRITE A REVIEW FOR <span class="color_green">SOMETHING</span> AT SOMEWHERE
			</p>
			<%= form_for(@new_review, remote: true) do |new_review| %>
        <div id="error_explanation">
        </div>
			<!-- <textarea class="commment_textarea"></textarea>  -->
			<%= new_review.text_area :description, :class => "commment_textarea" %>
			<%= new_review.hidden_field :dish_id, :value => @dish.id %>
      <%= new_rating %>
			<button class="btn btn-success right_button">SUBMIT REVIEW</button>
			<% end %>
		</div>

	</div>

</div>
<!-- Include all compiled plugins (below), or include individual files as needed -->
<script>
$('.map_opener').click(function()
{
	console.log('I am in map opener');
	if($('.map').is(':visible'))
	{
		// var height = $('.section_item').css('height') - $('.map').css('height');
		$('.map').slideUp();
		// $('.section_item').css('height',height);
	}
	else
	{
		// var height = $('.section_item').css('height') + $('.map').css('height');
		$('.map').slideDown();
		// $('.section_item').css('height',height);
	}

	return false;
});

</script>
